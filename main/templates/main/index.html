{% extends "main/base.html" %}{# 継承するテンプレートを指定 #}
{% load static %}

{% block extra_style %}{# 上書きするブロック名（extra_style）を指定して、index.html 専用の CSS を追加 #}
<link rel="stylesheet" href="{% static 'main/css/index.css' %}">
{% endblock %}

{% block content %}{# index ページの中身を記述 #}

    <main class="main"> <!-- メイン -->
        

        <section class="main__cowntdown space"> <!-- カウントダウン（Javascript） -->
            <p>甲陽学院中学校</p>
            <p>音楽と展覧の会当日まで</p>
            <div class="main__cowntdown__day">
                <p class="main__cowntdown__day_will">あと</p>
                <!-- <h1 class="main__cowntdown__day_num" id="day"></h1> -->
                <p class="main__cowntdown__day__container">
                    <span id="day" class="main__cowntdown__day__container_num"></span>
                    日
                    <span id="hour" class="main__cowntdown__day__container_num"></span>
                    時間
                    <span id="min" class="main__cowntdown__day__container_num"></span>
                    分
                    <span id="sec" class="main__cowntdown__day__container_num"></span>
                    秒
                </p>
                <div class="container">
                    <div class="box">
                             <div class="clock"></div>
                    </div>
                </div>
                <!-- <p class="main__cowntdown__day_txt">日</p> -->
            </div>
        </section>
        <article>
            
        </article>
        <article class="main__article space"> <!-- お知らせ的な　食堂いつ　落とし物は　全面禁煙　上履き　講堂電話切れ　 -->
            <h2 class="news">お知らせ</h2>
            
        </article>

        <article>
            <h2 class="committee">音展委員</h2>
            <p>音展委員長:</p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>

        </article>
    </main>
{% endblock %}
{% block extra_js %}{# 追加 JavaScript 用ブロック #}

    <script src="./javascript/main.js"></script>
    <script>
        'use strict';

        function countdown(due) {
            const now = new Date();

            const rest = due.getTime() - now.getTime();
            const sec = Math.floor(rest / 1000) % 60;
            const min = Math.floor(rest / 1000 / 60) % 60;
            const hours = Math.floor(rest / 1000 / 60 / 60) % 24;
            const days = Math.floor(rest / 1000 / 60 / 60 / 24);
            const count = [days, hours, min, sec];

            return count;
        }

        const goal = new Date(2023, 11, 3);

        function recalc() {
            const counter = countdown(goal);
            document.getElementById('day').textContent = counter[0];
            document.getElementById('hour').textContent = counter[1];
            document.getElementById('min').textContent = String(counter[2]).padStart(2, '0');
            document.getElementById('sec').textContent = String(counter[3]).padStart(2, '0');
            refresh();  
        }

        function refresh() {
            setTimeout(recalc, 1000);
        }
        recalc();

    </script>
{% endblock %}   